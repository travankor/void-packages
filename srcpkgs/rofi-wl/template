# Template file for 'rofi-wl'
pkgname=rofi-wl
version=1.6.1
revision=1
_githash=a9dda88eb79f3dc3eacc3713d07dca7b63109427
create_wrksrc=yes
wrksrc=${pkgname%-*}-${_githash}
build_wrksrc=${pkgname%-*}-${_githash}
build_style=meson
hostmakedepends="autoconf automake flex glib-devel pkg-config wayland-devel"
makedepends="check-devel libXinerama-devel librsvg-devel
 libxkbcommon-devel pango-devel startup-notification-devel
 xcb-util-wm-devel xcb-util-xrm-devel wayland-devel wayland-protocols"
short_desc="Window switcher, run dialog and dmenu replacement"
maintainer="Dave Davenport <qball@gmpclient.org>"
license="MIT"
homepage="https://github.com/travankor/rofi"
distfiles="${homepage}/archive/${_githash}.tar.gz
 https://github.com/sardemff7/libgwater/archive/e6faf48267ae40547cb86c125f265f54f382df1c.tar.gz
 https://github.com/sardemff7/libnkutils/archive/6164bacaef10031ce77380499cfad2ae818ab6b0.tar.gz"
checksum="7288da706b6a4567cde8f8a67e34a895f652b7b7fd1f2768b8d13ee4926359fc
 4a7f26fdc329c0638b5e4499b4ed8ec2a2354093cd05613b896dbaa212072ef7
 2ed4a6fa8d2ee8c4b810f53eeb30de3c3578e150c8f2cc420ec445ccaeedb6c6"
conflicts="rofi>=0"

post_extract() {
	mv libgwater-e6faf48267ae40547cb86c125f265f54f382df1c/* ${build_wrksrc}/subprojects/libgwater
	mv libnkutils-6164bacaef10031ce77380499cfad2ae818ab6b0/* ${build_wrksrc}/subprojects/libnkutils
}

post_install() {
	vlicense COPYING
}

rofi-wl-devel_package() {
	short_desc+=" - development files"
	depends="libglib-devel cairo-devel"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
	}
}
